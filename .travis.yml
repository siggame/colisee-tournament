sudo: required

services:
  - docker

before_script:
  - docker build -t siggame/colisee-tournament .
  - docker run --name tournament-db --publish 5433:5432 --detach siggame/colisee-db

script:
  - docker run --rm -e POSTGRES_PORT=5432 --net host siggame/colisee-tournament npm run test

after_script:
  - docker stop tournament-db